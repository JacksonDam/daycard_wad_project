{% extends 'daycard/base.html' %}
{% load static %}

{% block title_block %}
	Home
{% endblock %}

{% block topbar_right %}
	{% if can_post == True %}
        <a href="{% url 'post' %}" id="post-link">
        	<img class="img-fluid fit-image w-25" src="{% static "images/plus.png" %}" alt="Post" type="postbtnimg">
        </a>
    {% else %}
		<a href="{% url 'profile' %}" id="profile-link">
        	{% if profile.picture %}
        		<img class="img-fluid fit-image w-25" src="{{ MEDIA_URL }}{{ profile.picture }}" alt="Post" id="topbarprofileimg">
        	{% else %}
        		<img class="img-fluid fit-image w-25" src="{% static "images/defaultprofile.png" %}" alt="Post" id="topbarprofileimg">
        	{% endif %}
        </a>
    {% endif %}
{% endblock %}


{% block contextual %}
	<div class="row w-75 mx-auto" id="cards">
	    <div class="row gy-4 mx-auto align-items-center">
	        <div class="row mt-5"></div>
            <div class="row mt-5"></div>
            {% if daycards %}
	            {% for daycard_tup in daycards %}
			        <div class="col-xxl-4 d-flex justify-content-center">
						<div class="card" type="{{ daycard_tup.0.colour }}">
							<div class="card-contents" type="{{ daycard_tup.0.colour }}"> 
								<div class="card-front" type="{{ daycard_tup.0.colour }}">
									<div class="card-img-top d-flex align-items-center bg-transparent p-1">
								        <div>
								        	{% if daycard_tup.1.picture %}
								        		<img class="img-fluid fit-image my-auto" src="{{ MEDIA_URL }}{{ daycard_tup.1.picture }}" alt="Post" purpose="profileimg">
								        	{% else %}
								            	<img class="img-fluid fit-image my-auto" src="{% static "images/defaultprofile.png" %}" alt="Profile image" purpose="profileimg">
								            {% endif %}
								        </div>
								        <h5 class="col p-2 mr-auto">{{ daycard_tup.0.postUser.username }}</h5>
								        {% if daycard_tup.3 %}
								        	<button class="btn btn-dark active" btntype="like-btn" data-username="{{ daycard_tup.0.postUser.username }}">üëç {{ daycard_tup.2 }}</button>
								        {% else %}
								        	<button class="btn btn-dark" btntype="like-btn" data-username="{{ daycard_tup.0.postUser.username }}">üëç {{ daycard_tup.2 }}</button>
								        {% endif %}
								    </div>
								    <div class="card-body text-center">
								    	<p class="card-text">Caption:</p>
								    	<p class="card-text" modifier="normal">{{ daycard_tup.0.caption }}</p>
									</div>
								</div>
								<div class="card-rear" type="{{ daycard_tup.0.colour }}">
									<div class="card-img-top d-flex align-items-center bg-transparent p-1">
								        <div>
								        	{% if daycard_tup.1.picture %}
								        		<img class="img-fluid fit-image my-auto" src="{{ MEDIA_URL }}{{ daycard_tup.1.picture }}" alt="Post" purpose="profileimg">
								        	{% else %}
								            	<img class="img-fluid fit-image my-auto" src="{% static "images/defaultprofile.png" %}" alt="Profile image" purpose="profileimg">
								            {% endif %}
								        </div>
								        <h5 class="col p-2 mr-auto">{{ daycard_tup.0.postUser.username }}</h5>
								        {% if daycard_tup.0.postTime.hour < 10 %}
								        	{% if daycard_tup.0.postTime.minute < 10 %}
								        		<h5 class="card-title p-2 mr-auto">0{{ daycard_tup.0.postTime.hour }}:0{{ daycard_tup.0.postTime.minute }}</h5>
								        	{% else %}
								        		<h5 class="card-title p-2 mr-auto">0{{ daycard_tup.0.postTime.hour }}:{{ daycard_tup.0.postTime.minute }}</h5>
								        	{% endif %}
								        {% else %}
								            {% if daycard_tup.0.postTime.minute < 10 %}
								        		<h5 class="card-title p-2 mr-auto">{{ daycard_tup.0.postTime.hour }}:0{{ daycard_tup.0.postTime.minute }}</h5>
								        	{% else %}
								        		<h5 class="card-title p-2 mr-auto">{{ daycard_tup.0.postTime.hour }}:{{ daycard_tup.0.postTime.minute }}</h5>
								        	{% endif %}
								        {% endif %}
								    </div>
								    <div class="card-body text-center">
									    <p class="card-text">{{ daycard_tup.0.wordOne }}</p>
									    <p class="card-text">{{ daycard_tup.0.wordTwo }}</p>
									    <p class="card-text">{{ daycard_tup.0.wordThree }}</p>
									</div>
								</div>
							</div>
					    </div>
			        </div>
			        {% if forloop.counter|divisibleby:3 %}
			        	<div class="w-100"></div>
			        {% endif %}
			    {% endfor %}
			{% else %}
				<div class="w-100 h-50"></div>
				<div class="col text-center">
		            <h1 modifier='normal'>No DayCards yet today!</h1><br />
		            <h1 modifier='normal'>Either add some friends, or check back when your friends have posted.</h1>
		        </div>
		        <div class="w-100 h-50"></div>    
		    {% endif %}  	          
		</div>
	</div>
{% endblock %}
{% block contextual_js %}
	<script src="{% static 'js/daycard-jquery.js/' %}" crossorigin="anonymous"></script>
	<script src="{% static 'js/daycard-ajax.js/' %}" crossorigin="anonymous"></script>
{% endblock %}